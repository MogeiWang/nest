<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>NEST: PoorMansAllocator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NEST
   &#160;<span id="projectnumber">2.6.0,not_revisioned_source_dir@0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classPoorMansAllocator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PoorMansAllocator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The poor man's allocator is a simple pool-based allocator, used to allocate storage for connections in the limit of large machines.  
 <a href="classPoorMansAllocator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="allocator_8h_source.html">allocator.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for PoorMansAllocator:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classPoorMansAllocator.png" usemap="#PoorMansAllocator_map" alt=""/>
  <map id="PoorMansAllocator_map" name="PoorMansAllocator_map">
<area href="classPaddedPMA.html" title="The Fujitsu compiler on K cannot handle OpenMP thread-private properly. " alt="PaddedPMA" shape="rect" coords="0,56,121,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPoorMansAllocator_1_1chunk.html">chunk</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A chunk of memory, one element in the linked list of the memory pool.  <a href="structPoorMansAllocator_1_1chunk.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acb0e14bda756a7ee440fd0ab5440da9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPoorMansAllocator.html#acb0e14bda756a7ee440fd0ab5440da9e">init</a> (size_t chunk_size=1048576)</td></tr>
<tr class="memdesc:acb0e14bda756a7ee440fd0ab5440da9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">No constructors, as this would be counted as a 'use' of the pool before declaring it thread-private by the compiler.  <a href="#acb0e14bda756a7ee440fd0ab5440da9e">More...</a><br /></td></tr>
<tr class="separator:acb0e14bda756a7ee440fd0ab5440da9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031f921f6bc39e17f5f018e13bc96314"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPoorMansAllocator.html#a031f921f6bc39e17f5f018e13bc96314">destruct</a> ()</td></tr>
<tr class="separator:a031f921f6bc39e17f5f018e13bc96314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a144ccbbcf16c56d209bcb7b94f3a325b"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPoorMansAllocator.html#a144ccbbcf16c56d209bcb7b94f3a325b">alloc</a> (size_t obj_size)</td></tr>
<tr class="separator:a144ccbbcf16c56d209bcb7b94f3a325b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab68b21e15d6f6cf1a885effc527252bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPoorMansAllocator.html#ab68b21e15d6f6cf1a885effc527252bb">new_chunk</a> ()</td></tr>
<tr class="memdesc:ab68b21e15d6f6cf1a885effc527252bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append a new chunk of memory to the list forming the memory pool.  <a href="#ab68b21e15d6f6cf1a885effc527252bb">More...</a><br /></td></tr>
<tr class="separator:ab68b21e15d6f6cf1a885effc527252bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa222378cde6dff75f8eb1709babccea3"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPoorMansAllocator.html#aa222378cde6dff75f8eb1709babccea3">chunk_size_</a></td></tr>
<tr class="memdesc:aa222378cde6dff75f8eb1709babccea3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of each chunk to be allocated.  <a href="#aa222378cde6dff75f8eb1709babccea3">More...</a><br /></td></tr>
<tr class="separator:aa222378cde6dff75f8eb1709babccea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108b38df91611acdb88238cf53011530"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPoorMansAllocator.html#a108b38df91611acdb88238cf53011530">head_</a></td></tr>
<tr class="memdesc:a108b38df91611acdb88238cf53011530"><td class="mdescLeft">&#160;</td><td class="mdescRight">Points to the next free location in the current chunk.  <a href="#a108b38df91611acdb88238cf53011530">More...</a><br /></td></tr>
<tr class="separator:a108b38df91611acdb88238cf53011530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18505c9cd241f8f172d3935b3fe9b8c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPoorMansAllocator_1_1chunk.html">chunk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPoorMansAllocator.html#a18505c9cd241f8f172d3935b3fe9b8c1">chunks_</a></td></tr>
<tr class="memdesc:a18505c9cd241f8f172d3935b3fe9b8c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">First element of the linked list of chunks.  <a href="#a18505c9cd241f8f172d3935b3fe9b8c1">More...</a><br /></td></tr>
<tr class="separator:a18505c9cd241f8f172d3935b3fe9b8c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0368ab36de5bdd505eb67929190608e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPoorMansAllocator.html#ad0368ab36de5bdd505eb67929190608e">capacity_</a></td></tr>
<tr class="memdesc:ad0368ab36de5bdd505eb67929190608e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remaining capacity of the current chunk.  <a href="#ad0368ab36de5bdd505eb67929190608e">More...</a><br /></td></tr>
<tr class="separator:ad0368ab36de5bdd505eb67929190608e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The poor man's allocator is a simple pool-based allocator, used to allocate storage for connections in the limit of large machines. </p>
<p>The allocator only supports allocation, but no freeing. In the limit of large machines this is sufficient, because we rarely need to grow synapse lists, as the majority of neurons have at most one target per machine. The allocator manages the pool of free memory in chunks that form a linked list. A head pointer keeps track of the next position in a chunk to be handed to the caller of allocate. Once head reaches the end of the current chunk, a new chunk is allocated from the OS and appends it to the linked list of chunks. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a144ccbbcf16c56d209bcb7b94f3a325b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * PoorMansAllocator::alloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>obj_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="connector__model__impl_8h.html#a1147d106b6a9ab16edf809f8fab62e9a">allocate()</a>, and <a class="el" href="connector__base_8h.html#a64fc2ee3cf555c4e07d8bc382fbd4c32">suicide_and_resurrect()</a>.</p>

</div>
</div>
<a class="anchor" id="a031f921f6bc39e17f5f018e13bc96314"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PoorMansAllocator::destruct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="structPoorMansAllocator_1_1chunk.html#a264501b01777e944dadad5b57bf17c0f">PoorMansAllocator::chunk::next_</a>.</p>

</div>
</div>
<a class="anchor" id="acb0e14bda756a7ee440fd0ab5440da9e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PoorMansAllocator::init </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>chunk_size</em> = <code>1048576</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>No constructors, as this would be counted as a 'use' of the pool before declaring it thread-private by the compiler. </p>
<p>Therefore we have our own <a class="el" href="classPoorMansAllocator.html#acb0e14bda756a7ee440fd0ab5440da9e" title="No constructors, as this would be counted as a &#39;use&#39; of the pool before declaring it thread-private b...">init()</a> and <a class="el" href="classPoorMansAllocator.html#a031f921f6bc39e17f5f018e13bc96314">destruct()</a> functions. </p>

<p>Referenced by <a class="el" href="classnest_1_1Scheduler.html#a2012a54b09a2754aef94ba533818f611">nest::Scheduler::prepare_nodes()</a>.</p>

</div>
</div>
<a class="anchor" id="ab68b21e15d6f6cf1a885effc527252bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PoorMansAllocator::new_chunk </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Append a new chunk of memory to the list forming the memory pool. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ad0368ab36de5bdd505eb67929190608e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t PoorMansAllocator::capacity_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remaining capacity of the current chunk. </p>

</div>
</div>
<a class="anchor" id="aa222378cde6dff75f8eb1709babccea3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t PoorMansAllocator::chunk_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The size of each chunk to be allocated. </p>
<p>This size must be chosen as a tradeoff between few allocations of chunks (large chunk) and little memory overhead due to unused chunks (small chunks). </p>

</div>
</div>
<a class="anchor" id="a18505c9cd241f8f172d3935b3fe9b8c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPoorMansAllocator_1_1chunk.html">chunk</a>* PoorMansAllocator::chunks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>First element of the linked list of chunks. </p>

</div>
</div>
<a class="anchor" id="a108b38df91611acdb88238cf53011530"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* PoorMansAllocator::head_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Points to the next free location in the current chunk. </p>
<p>This location will be handed to the caller in the next call of allocate. The type is char*, so that pointer arithmetic allows adding sizeof(object) directly to advance the pointer to the next free location. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="allocator_8h_source.html">allocator.h</a></li>
<li><a class="el" href="allocator_8cpp.html">allocator.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 26 2015 08:02:29 for NEST by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
